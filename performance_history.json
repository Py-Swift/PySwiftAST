{
  "baseline": {
    "date": "2025-11-25",
    "commit": "5748452",
    "description": "Initial performance baseline after implementing performance test suite",
    "parsing_median_ms": 6.426,
    "roundtrip_median_ms": 29.551,
    "tokenization_median_ms": 89.266,
    "codegen_median_ms": 4.865,
    "speedup_vs_python_parsing": 1.35,
    "speedup_vs_python_roundtrip": 1.04,
    "python_parsing_baseline_ms": 8.679,
    "python_roundtrip_baseline_ms": 30.229,
    "test_file": "django_query.py (2,886 lines, 111,746 bytes)",
    "iterations": 100,
    "warmup_runs": 10,
    "build_mode": "release",
    "platform": "macOS",
    "swift_version": "6.1"
  },
  "goals": {
    "parsing_speedup_target": 2.0,
    "roundtrip_speedup_target": 1.5,
    "parsing_target_ms": 4.34,
    "roundtrip_target_ms": 20.15,
    "notes": "Target is 2x+ faster than Python for parsing, 1.5x+ for round-trip"
  },
  "history": [
    {
      "date": "2025-11-25T10:55:00Z",
      "commit": "attempted",
      "optimization": "Added @inline(__always) to advance() and skipWhitespace()",
      "parsing_median_ms": 6.325,
      "roundtrip_median_ms": 31.611,
      "tokenization_median_ms": 90.546,
      "codegen_median_ms": 4.832,
      "speedup_vs_python_parsing": 1.37,
      "speedup_vs_python_roundtrip": 0.96,
      "delta_parsing_percent": -0.6,
      "delta_roundtrip_percent": 9.9,
      "delta_tokenization_percent": 2.7,
      "status": "reverted",
      "tests_passing": true,
      "notes": "Inline hints provided minimal parsing improvement (<1%) but caused round-trip regression. Reverted per guidelines."
    },
    {
      "date": "2025-11-25T11:12:00Z",
      "commit": "in-progress",
      "optimization": "Convert Tokenizer to use [Character] array for O(1) indexing",
      "parsing_median_ms": 6.185,
      "roundtrip_median_ms": 25.609,
      "tokenization_median_ms": 43.834,
      "codegen_median_ms": 4.939,
      "speedup_vs_python_parsing": 1.40,
      "speedup_vs_python_roundtrip": 1.18,
      "delta_parsing_percent": -3.2,
      "delta_roundtrip_percent": -12.1,
      "delta_tokenization_percent": -49.4,
      "status": "improved",
      "tests_passing": true,
      "notes": "MAJOR WIN: Converted String.Index (O(n)) to Int indexing on character array. Tokenization improved 49.4% (86.6ms → 43.8ms, nearly 2x faster!). Parsing improved 3.2%, round-trip improved 12.1%. All 80 tests passing. This addresses the primary bottleneck identified in profiling."
    },
    {
      "date": "2025-11-25T16:05:00Z",
      "commit": "5b1daec",
      "optimization": "Current baseline after parser completeness improvements",
      "parsing_median_ms": 6.5,
      "roundtrip_median_ms": 26.3,
      "tokenization_median_ms": 44.2,
      "codegen_median_ms": 4.74,
      "speedup_vs_python_parsing": 1.34,
      "speedup_vs_python_roundtrip": 1.15,
      "delta_parsing_percent": 5.1,
      "delta_roundtrip_percent": 2.7,
      "delta_tokenization_percent": 0.8,
      "status": "baseline",
      "tests_passing": true,
      "notes": "New baseline after parser improvements (inline comments, type annotations). Round-trip improved from 1.04x to 1.15x. All 81 tests passing. Parser now handles more Python features correctly."
    },
    {
      "date": "2025-11-25T16:06:00Z",
      "commit": "attempted",
      "optimization": "Replace string concatenation with array builder in function codegen",
      "parsing_median_ms": 6.5,
      "roundtrip_median_ms": 26.3,
      "tokenization_median_ms": 44.2,
      "codegen_median_ms": 4.827,
      "speedup_vs_python_parsing": 1.34,
      "speedup_vs_python_roundtrip": 1.15,
      "delta_parsing_percent": 0,
      "delta_roundtrip_percent": 0,
      "delta_tokenization_percent": 0,
      "delta_codegen_percent": 1.8,
      "status": "reverted",
      "tests_passing": true,
      "notes": "Attempted to optimize string building in function signature generation. Micro-benchmarks showed array.joined() was 7x faster, but real-world test showed 1.8% regression (4.74ms → 4.827ms). Swift's + operator is already optimized for small string concatenations. Array overhead outweighed benefits. REVERTED per guidelines."
    },
    {
      "date": "2025-11-25T16:07:00Z",
      "commit": "planned",
      "optimization": "UTF-8 byte array tokenizer migration (MAJOR)",
      "status": "in-progress",
      "expected_improvement": "6x faster tokenization (44ms → 7-10ms)",
      "risk": "high",
      "complexity": "high",
      "notes": "Micro-benchmarks show UTF-8 view is 6x faster than Character array (0.010ms vs 0.051ms). Plan: 1) Create UTF8Tokenizer alongside existing, 2) Migrate ASCII-safe operations first, 3) Add Unicode support, 4) Validate with all 81 tests, 5) Compare performance. Target: 17-20ms round-trip (1.5-1.8x vs Python)."
    },
    {
      "date": "2025-11-25T16:20:00Z",
      "commit": "in-progress",
      "optimization": "UTF-8 byte array tokenizer (IMPLEMENTED!)",
      "parsing_median_ms": 6.5,
      "roundtrip_median_ms": "TBD",
      "tokenization_median_ms": 0.292,
      "tokenization_old_ms": 5.628,
      "codegen_median_ms": 4.74,
      "speedup_tokenization": 19.3,
      "status": "implemented",
      "tests_passing": true,
      "notes": "MASSIVE SUCCESS! Implemented UTF8Tokenizer with byte-level scanning. Results: 19.3x faster tokenization (5.628ms → 0.292ms). Far exceeded 6x target! All compatibility tests pass. Test file: ml_pipeline.py (482 lines). Next: Integrate into full parser pipeline and validate round-trip performance."
    }
  ]
}
